!function(t){var e={};function n(r){if(e[r])return e[r].exports;var a=e[r]={i:r,l:!1,exports:{}};return t[r].call(a.exports,a,a.exports,n),a.l=!0,a.exports}n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var a in t)n.d(r,a,function(e){return t[e]}.bind(null,a));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=1)}([function(t,e,n){},function(t,e,n){"use strict";n.r(e);n(0);function r(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var a=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.promise=this.data()}var e,n,a;return e=t,(n=[{key:"data",value:function(){return new Promise((function(t,e){var n;(n=new XMLHttpRequest).onreadystatechange=function(){4===n.readyState&&(200===n.status?t({dateStr:n.responseText,msg:"status OK"}):e("error"))},n.open("GET","https://raw.githubusercontent.com/ShevelevAndrew/api-json-test/master/catalogData.json",!0),n.send()}))}}])&&r(e.prototype,n),a&&r(e,a),t}();function i(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var o=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.goodList,this._init()}var e,n,r;return e=t,(n=[{key:"_init",value:function(){this._getDate()}},{key:"_getDate",value:function(){var t=this;new a("https://raw.githubusercontent.com/ShevelevAndrew/api-json-test/master/catalogData.json").data().then((function(e){console.log(e.msg),t.goodList=JSON.parse(e.dateStr),t.list=t._fetchData(),t.renderProducts()})).catch((function(t){console.log(t)})).finally((function(){console.log("Promise completed")}))}},{key:"_handleEvents",value:function(){document.querySelector(".products").addEventListener("click",(function(t){t.target.classList.contains("buy-btn")&&cart.addProduct(t.target)}))}},{key:"_fetchData",value:function(){for(var t=[],e=0;e<this.goodList.length;e++)t.push(this.createProduct(e));return t}},{key:"createProduct",value:function(t){return{id:this.goodList[t].id_product,name:this.goodList[t].product_name,price:this.goodList[t].price,img:"https://placehold.it/200x150",quantity:0,createTemplate:function(){return'<div class="product-item" data-id="'.concat(this.id,'">\n                            <img src="').concat(this.img,'" alt="Some img">\n                            <div class="desc">\n                                <h3>').concat(this.name,"</h3>\n                                <p>").concat(this.price,' $</p>\n                                <button class="buy-btn" \n                                data-id="').concat(this.id,'"\n                                data-name="').concat(this.name,'"\n                                data-image="').concat(this.img,'"\n                                data-price="').concat(this.price,'">Купить</button>\n                            </div>\n                        </div>')},add:function(){this.quantity++}}}},{key:"renderProducts",value:function(){var t="",e=!0,n=!1,r=void 0;try{for(var a,i=this.list[Symbol.iterator]();!(e=(a=i.next()).done);e=!0)t+=a.value.createTemplate()}catch(t){n=!0,r=t}finally{try{e||null==i.return||i.return()}finally{if(n)throw r}}document.querySelector(".products").innerHTML=t}}])&&i(e.prototype,n),r&&i(e,r),t}();function c(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var u=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.userCart=[],this._init()}var e,n,r;return e=t,(n=[{key:"_init",value:function(){this._showCart(),this._delButton()}},{key:"_showCart",value:function(){document.querySelector(".btn-cart").addEventListener("click",(function(){document.querySelector(".cart-block").classList.toggle("invisible")}))}},{key:"_delButton",value:function(){var t=this;document.querySelector(".cart-block").addEventListener("click",(function(e){e.target.classList.contains("del-btn")&&t.removeProduct(e.target)}))}},{key:"addProduct",value:function(t){var e=+t.dataset.id,n=this.userCart.find((function(t){return t.id===e}));n?n.quantity++:this.userCart.push({name:t.dataset.name,id:e,img:"https://placehold.it/100x80",price:+t.dataset.price,quantity:1}),this.renderCart()}},{key:"removeProduct",value:function(t){var e=+t.dataset.id,n=this.userCart.find((function(t){return t.id===e}));n.quantity>1?n.quantity--:(this.userCart.splice(this.userCart.indexOf(n),1),document.querySelector('.cart-item[data-id="'.concat(e,'"]')).remove()),this.renderCart()}},{key:"renderCart",value:function(){var t="",e=!0,n=!1,r=void 0;try{for(var a,i=this.userCart[Symbol.iterator]();!(e=(a=i.next()).done);e=!0){var o=a.value;t+='<div class="cart-item" data-id="'.concat(o.id,'">\n                                <div class="product-bio">\n                                    <img src="').concat(o.img,'" alt="Some image">\n                                    <div class="product-desc">\n                                        <p class="product-title">').concat(o.name,'</p>\n                                        <p class="product-quantity">Quantity: ').concat(o.quantity,'</p>\n                                        <p class="product-single-price">$').concat(o.price,' each</p>\n                                    </div>\n                                </div>\n                                <div class="right-block">\n                                    <p class="product-price">').concat(o.quantity*o.price,'</p>\n                                    <button class="del-btn" data-id="').concat(o.id,'">&times;</button>\n                                </div>\n                            </div>')}}catch(t){n=!0,r=t}finally{try{e||null==i.return||i.return()}finally{if(n)throw r}}document.querySelector(".cart-block").innerHTML=t}}])&&c(e.prototype,n),r&&c(e,r),t}(),s=new o,l=new u;console.log(s),console.log(l),document.querySelector(".products").addEventListener("click",(function(t){t.target.classList.contains("buy-btn")&&l.addProduct(t.target)}))}]);